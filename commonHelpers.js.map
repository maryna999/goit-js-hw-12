{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"44900645-90bb6bb627b06b4b3923afb1e\";\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n    const response = await axios.get(`${BASE_URL}`, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page: page,\n            per_page: PER_PAGE\n        }\n    });\n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    close: true,\n    showCounter: true,\n    enableKeyboard: true,\n});\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const imageMarkup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b>: ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b>: ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b>: ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b>: ${image.downloads}</p>\n            </div>\n        </a>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', imageMarkup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nexport function showLoader() {\n    document.querySelector('.loader-wrapper').style.display = 'flex';\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader-wrapper').style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n    document.getElementById('load-more').style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n    document.getElementById('load-more').style.display = 'none';\n}\n\nexport function scrollPage(offset) {\n    window.scrollBy({\n        top: offset,\n        behavior: 'smooth'\n    });\n}\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showError, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, scrollPage } from './js/render-functions.js';\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\ndocument.getElementById('search-form').addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = document.getElementById('search-input').value.trim();\n    \n    if (query === '') {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n        });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n        if (data.hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            renderImages(data.hits);\n            if (data.hits.length < totalHits) {\n                showLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        showError('An error occurred while fetching images. Please try again later.');\n    } finally {\n        hideLoader();\n    }\n});\n\ndocument.getElementById('load-more').addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages(query, page);\n        renderImages(data.hits);\n\n        const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n        scrollPage(cardHeight * 2);\n\n        if (page * 15 >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n    } catch (error) {\n        showError('An error occurred while fetching images. Please try again later.');\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","lightbox","SimpleLightbox","renderImages","images","gallery","imageMarkup","image","clearGallery","showError","message","iziToast","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollPage","offset","totalHits","event","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAY/C,OAXiB,MAAMC,EAAM,IAAI,GAAGL,CAAQ,GAAI,CAC5C,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUH,CACb,CACT,CAAK,GACe,IACpB,CCdA,MAAMK,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,aAAc,IACd,MAAO,GACP,YAAa,GACb,eAAgB,EACpB,CAAC,EAEM,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAcF,EAAO,IAAIG,GAAS;AAAA,mBACzBA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,qDAETA,EAAM,KAAK;AAAA,qDACXA,EAAM,KAAK;AAAA,wDACRA,EAAM,QAAQ;AAAA,yDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGnE,EAAE,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAW,EACnDL,EAAS,QAAO,CACpB,CAEO,SAASO,GAAe,CAC3B,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CAEO,SAASI,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,CACjB,CAAK,CACL,CAEO,SAASE,GAAa,CACzB,SAAS,cAAc,iBAAiB,EAAE,MAAM,QAAU,MAC9D,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,iBAAiB,EAAE,MAAM,QAAU,MAC9D,CAEO,SAASC,GAAqB,CACjC,SAAS,eAAe,WAAW,EAAE,MAAM,QAAU,OACzD,CAEO,SAASC,GAAqB,CACjC,SAAS,eAAe,WAAW,EAAE,MAAM,QAAU,MACzD,CAEO,SAASC,EAAWC,EAAQ,CAC/B,OAAO,SAAS,CACZ,IAAKA,EACL,SAAU,QAClB,CAAK,CACL,CC9DA,IAAInB,EAAQ,GACRC,EAAO,EACPmB,EAAY,EAEhB,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAU,MAAOC,GAAU,CAI/E,GAHAA,EAAM,eAAc,EACpBrB,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,OAElDA,IAAU,GAAI,CACd,SAAS,QAAQ,CACb,MAAO,UACP,QAAS,6BACrB,CAAS,EACD,MACH,CAEDC,EAAO,EACPS,IACAO,IACAH,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAYC,EAAOC,CAAI,EAC1CmB,EAAYE,EAAK,UACbA,EAAK,KAAK,SAAW,EACrBX,EAAU,0EAA0E,GAEpFN,EAAaiB,EAAK,IAAI,EAClBA,EAAK,KAAK,OAASF,GACnBJ,IAGX,MAAe,CACZL,EAAU,kEAAkE,CACpF,QAAc,CACNI,GACH,CACL,CAAC,EAED,SAAS,eAAe,WAAW,EAAE,iBAAiB,QAAS,SAAY,CACvEd,GAAQ,EACRa,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAYC,EAAOC,CAAI,EAC1CI,EAAaiB,EAAK,IAAI,EAEtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpFL,EAAWK,EAAa,CAAC,EAErBtB,EAAO,IAAMmB,IACbH,IACA,SAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,EAER,MAAe,CACZN,EAAU,kEAAkE,CACpF,QAAc,CACNI,GACH,CACL,CAAC"}